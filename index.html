<!DOCTYPE html>
<html>
  <head>
    <!-- Load React. -->
    <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <!-- Load our React component. -->
    <script type = "text/babel">

   	class Memoria extends React.Component{

		reglas(id,carta) {
			if (this.state.cartas1===null){
				this.state.cartas1=carta
				this.state.estadocarta1=id
				
			}
			else if(this.state.cartas2===null){
				this.state.cartas2=carta
				this.state.estadocarta2=id
				
			}


			
			this.state.estado[id]=!this.state.estado[id]
			this.forceUpdate()
			
			if (this.state.estado[this.state.estadocarta1]===true){
				this.state.intentos=this.state.intentos+1
				console.log(this.state.intentos)
			}


			if(this.state.cartas1 && this.state.cartas2){
				if(this.state.cartas1===this.state.cartas2){
					
					this.forceUpdate()
					
					
					this.state.cartas1=null
					this.state.cartas2=null
				}
				else{
					setTimeout(() => {
						

						this.state.cartas2=null
						this.state.cartas1=null
						this.state.estado[this.state.estadocarta1]=false
						this.state.estado[id]=false
						this.forceUpdate()
					}, 500);

				
					
					return
				}

			}

			
			if (this.state.estado[0]===true && 
				this.state.estado[1]===true &&
				this.state.estado[2]===true &&
				this.state.estado[3]===true &&
				this.state.estado[4]===true &&
				this.state.estado[5]===true &&
				this.state.estado[6]===true &&
				this.state.estado[7]===true &&
				this.state.estado[8]===true &&
				this.state.estado[9]===true &&
				this.state.estado[10]===true &&
				this.state.estado[11]===true &&
				this.state.estado[12]===true &&
				this.state.estado[13]===true &&
				this.state.estado[14]===true &&
				this.state.estado[15]===true ){

				setTimeout(() => {
					alert("Â¡JUEGO COMPLETADO!")
					location.reload();
					this.state.cartas2=null
					this.state.cartas1=null
					estado:[
					false,
					false,
					false,
					false,
					false,
					false,
					false,
					false,
					false,
					false,
					false,
					false,
					false,
					false,
					false,
					false,				
					]
					this.state.puntos=8
					
				}, 500);

			}

			
		}

		constructor (props){
			super()
			this.state={

				puntos: 0,
				cartas1:null,
				cartas2:null,
				intentos:0,


		
			

				estado:[
				false,
				false,
				false,
				false,
				false,
				false,
				false,
				false,
				false,
				false,
				false,
				false,
				false,
				false,
				false,
				false,				
				]
			}

		}

   		render(){
			
			var listacompleta=[    
					"./imagenes/houston.jpg","./imagenes/milwaukee.png","./imagenes/toronto.png","./imagenes/dallas.jpg", "./imagenes/gsw.jpg","./imagenes/okc.jpg",
					"./imagenes/houston.jpg","./imagenes/lakers.jpg","./imagenes/lakers.jpg","./imagenes/dallas.jpg","./imagenes/miami.jpg", 
					"./imagenes/milwaukee.png","./imagenes/okc.jpg","./imagenes/gsw.jpg","./imagenes/toronto.png","./imagenes/miami.jpg"

			]

			var lista=[]
			var contador=0
		

			
			var grid = {
   				border: "black",
				display: "grid",
				gridGap: "5px",
				gridAutoColumns: "110px",
				gridTemplateColumns: "auto auto auto auto"
				}
			
			while (contador!= 16){
				
				if(!this.state.estado[contador]){
					lista.push(<img src= {"./imagenes/nba-logo.png"} onClick={this.reglas.bind(this,contador,listacompleta[contador],)} /> )
					
				}
				else{
					lista.push(<img src= {listacompleta[contador]} onClick={this.reglas.bind(this,contador,listacompleta[contador],)}/>)
					
					
				}
				
				contador=contador+1

				

			}
			return (<div style= {grid}>{lista}</div>)
   			
			
   		}


   	}


   	class Grid extends React.Component{


   		render(){


			


   			var grid = {
   				border: "black",
				display: "grid",
				gridGap: "5px",
				gridAutoColumns: "110px",
				gridTemplateColumns: "auto auto auto auto",
				}

				const element = <h1>Hello, world</h1>

   			return (
				   
				<div text ={element} style = {grid}> 

   				<Memoria/>
   				</div>)
   		}

    }




   	ReactDOM.render(
  	<Grid/>,
  	document.getElementById('root')
	);

	const element = <h1>Hello, world</h1>;








    </script>

    

    <meta charset="UTF-8" />
    <title>Memoria</title>
    <link rel="stylesheet" type="text/css" href="main.css">
  </head>
  <body>

    <div id="root"></div>
   

    </main>

  </body>
</html>